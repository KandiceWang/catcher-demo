name: Deploy Static Site

on:
  push:
    branches: [ master ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Create static site
      run: |
        mkdir -p ./static-site
        
        # Copy all static assets
        cp -r ./Catcher-demo/wwwroot/* ./static-site/ 2>/dev/null || :
        
        # Create index.html
        cat > ./static-site/index.html << 'EOF'
        <!DOCTYPE html>
        <html lang="zh-TW">
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>Catcher Demo - 台灣創作者接發案平台</title>
            <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
            <link rel="stylesheet" href="css/site.css" />
            <link rel="icon" href="favicon.ico" />
        </head>
        <body>
            <header>
                <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="#"><strong>🎨 Catcher</strong></a>
                        <div class="navbar-nav">
                            <a class="nav-link text-dark" href="#home">首頁</a>
                            <a class="nav-link text-dark" href="#services">服務</a>
                            <a class="nav-link text-dark" href="#about">關於</a>
                        </div>
                    </div>
                </nav>
            </header>

            <main>
                <!-- Hero Section -->
                <section id="home" class="hero-section bg-primary text-white py-5">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-6">
                                <h1 class="display-4 fw-bold">台灣創作者接發案平台</h1>
                                <p class="lead mb-4">連接創作者與客戶，讓創意變現更簡單</p>
                                <div class="d-grid gap-2 d-md-flex">
                                    <button class="btn btn-light btn-lg px-4" type="button">開始接案</button>
                                    <button class="btn btn-outline-light btn-lg px-4" type="button">發布需求</button>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="text-center">
                                    <div class="bg-white rounded p-4 shadow">
                                        <h3 class="text-dark">功能特色</h3>
                                        <ul class="list-unstyled text-dark">
                                            <li>🎨 創作者服務展示</li>
                                            <li>🔍 智慧搜尋與篩選</li>
                                            <li>💬 即時訊息系統</li>
                                            <li>💰 透明的定價機制</li>
                                            <li>⭐ 評價與信任系統</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Services Section -->
                <section id="services" class="py-5">
                    <div class="container">
                        <h2 class="text-center mb-5">熱門服務</h2>
                        <div class="row">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">專業Logo設計</h5>
                                        <p class="card-text">設計師小明</p>
                                        <p class="text-muted">平面設計</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="h5 text-primary">NT$ 1,500</span>
                                            <small class="text-muted">⭐ 4.8 (127)</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">網站UI/UX設計</h5>
                                        <p class="card-text">設計師小華</p>
                                        <p class="text-muted">UI/UX設計</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="h5 text-primary">NT$ 3,000</span>
                                            <small class="text-muted">⭐ 4.9 (89)</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">品牌識別設計</h5>
                                        <p class="card-text">設計師小美</p>
                                        <p class="text-muted">品牌設計</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="h5 text-primary">NT$ 5,000</span>
                                            <small class="text-muted">⭐ 4.7 (156)</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- About Section -->
                <section id="about" class="py-5 bg-light">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8 mx-auto text-center">
                                <h2>關於 Catcher</h2>
                                <p class="lead">
                                    這是一個專為台灣創作者設計的接發案平台演示版本。
                                    我們致力於連接優秀的創作者與有需求的客戶，
                                    讓創意能夠順利變現，讓好的作品被更多人看見。
                                </p>
                                <div class="row mt-4">
                                    <div class="col-md-4">
                                        <div class="text-center">
                                            <div class="h1 text-primary">1000+</div>
                                            <p>創作者</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-center">
                                            <div class="h1 text-primary">5000+</div>
                                            <p>完成案件</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-center">
                                            <div class="h1 text-primary">98%</div>
                                            <p>滿意度</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Demo Notice -->
                <section class="py-3 bg-warning">
                    <div class="container">
                        <div class="row">
                            <div class="col-12 text-center">
                                <p class="mb-0">
                                    <strong>📢 這是展示版本</strong> - 
                                    完整功能開發中，詳細資訊請參考 
                                    <a href="https://github.com/KandiceWang/catcher-demo" class="text-dark">
                                        <strong>GitHub Repository</strong>
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <footer class="border-top footer text-muted py-3">
                <div class="container text-center">
                    <p>&copy; 2025 - Catcher Demo - 台灣創作者接發案平台</p>
                    <p>
                        <a href="https://github.com/KandiceWang/catcher-demo">GitHub</a> | 
                        <a href="#services">服務</a> | 
                        <a href="#about">關於我們</a>
                    </p>
                </div>
            </footer>

            <script src="lib/jquery/dist/jquery.min.js"></script>
            <script src="lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
            <script src="js/site.js"></script>
            
            <script>
                // 簡單的頁面滾動效果
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth'
                            });
                        }
                    });
                });
            </script>
        </body>
        </html>
        EOF

    - name: Setup Pages
      uses: actions/configure-pages@v4

    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: './static-site'

    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
